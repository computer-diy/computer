<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title></title>
    <!-- <script src="https://cdn.bootcss.com/vue/2.5.16/vue.min.js"></script> -->
    <script src="assets/js/vue.js"></script>
    <script src="assets/js/axios.js"></script>
    <link rel="stylesheet" href="assets/css/element.css">
    <!-- 引入组件库 -->
    <script src="assets/js/element.js"></script>
    <!-- Required CSS files -->
    <link href="assets/css/fonts.css" rel="stylesheet">


    <link rel="stylesheet" href="assets/css/owl.carousel.css">
    <link rel="stylesheet" href="assets/css/barfiller.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/slicknav.css">
    <link rel="stylesheet" href="assets/css/main.css">
</head>

<body style="background:#efefef">
    <div id="app"  style="background-image:url(https://www1.pconline.com.cn/2017/usercenter/images/cover.png);background-repeat: no-repeat;background-size: 80% 325px;background-position:top center;">
        <div class="preloader">
            <span class="preloader-spin"></span>
        </div>
        <div class="site">
            <header>
                <div class="container">
                    <div class="row">
                        <div class="col-6 col-sm-3 logo-column">
                            <a href="index.html" class="logo">
                                <img src="assets/img/logo.png" alt="logo">
                            </a>
                        </div>
                        <div class="col-6 col-sm-9 nav-column clearfix">
                            <div class="right-nav">
                                <span class="search-icon fa fa-search"></span>
                                <form action="#" class="search-form">
                                    <input type="search" placeholder="search now">
                                    <button type="submit"><i class="fa fa-search"></i></button>
                                </form>
                            </div>
                            <nav id="menu" class="d-none d-lg-block">
                                <ul>
                                    <li class="current-menu-item has-child">
                                        <a href="index.html">产品库</a>
                                        <ul class="sub-menu" style="z-index: 1000">
                                            <li><a href="#">硬件</a></li>
                                            <li><a href="#">软件</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="about.html">关于</a></li>

                                    <li class="has-child">
                                        <a href="#">建议</a>
                                        <ul class="sub-menu" style="z-index: 1000">
                                            <li><a href="#">留言</a></li>
                                            <li><a href="#">反馈建议</a></li>
                                            <li><a href="#">联系我们</a></li>
                                        </ul>
                                    </li>
                                    <li v-if="userInfo.name" class="has-child">
                                        <a href="mine.html"><img :src="userInfo.headImg" style="width:30px;height:30px;border-radius:50%" alt="">
                                        {{userInfo.name}}</a>
                                        <ul class="sub-menu" style="z-index: 1000">
                                            <li><a @click="logout">注销</a></li>
                                            <li><a @click="dialogFormVisible = true">修改密码</a></li>
                                        </ul>
                                    </li>
                                    <li v-else><a href="login.html">登录</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </header>
            <div class="container text-center">

                <el-card class="box-card" style="margin-top:50px">
                    <el-row :gutter="20">
                        <el-col :span="3">
                            <div class="grid-content bg-purple" style="float:left;">
                                <img style="width:100px;border-radius:50%;float:left;display: block"
                                    :src="userInfo.headImg"
                                    alt="">
                                <br>
                                <el-button type="danger" @click="dialogFormVisible = true"
                                    style="float:left;margin-top: 10px" round>修改资料</el-button>
                            </div>
                        </el-col>
                        <el-col :span="18" style="text-align:left">
                            <el-row>
                                <el-col :span="12">
                                    <p>昵称：{{userInfo.name}}</p>
                                </el-col>
                                <el-col :span="12">
                                    <p>性别：{{userInfo.sex}}</p>
                                </el-col>
                            </el-row>
                            <el-row>
                                <el-col :span="12">
                                    <p>手机号：{{userInfo.phone}}</p>
                                </el-col>
                                <el-col :span="12">
                                    <p>邮箱：{{userInfo.mail}}</p>
                                </el-col>
                            </el-row>
                            <el-row>
                                <el-col :span="12">
                                    <p>地址：{{userInfo.phone}}</p>
                                </el-col>
                                <el-col :span="12">
                                    <p>签名：{{userInfo.phone}}</p>
                                </el-col>
                            </el-row>
                        </el-col>

                    </el-row>
                    <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" @select="">
                        <el-menu-item index="1">动态</el-menu-item>
                        <el-menu-item index="4">评论</el-menu-item>
                    </el-menu>

                </el-card>

                <br>


                <el-row :gutter="20">
                    <el-col :span="16">
                        <el-tabs type="border-card">
                            <el-tab-pane label="动态">动态</el-tab-pane>
                            <el-tab-pane label="论坛">论坛</el-tab-pane>
                            <el-tab-pane label="点评">点评</el-tab-pane>
                            <el-tab-pane label="设备">设备</el-tab-pane>
                        </el-tabs>
                    </el-col>
                    <el-col :span="8">
                        <el-card style="height:200px;margin-bottom: 20px">
                            <el-tabs v-model="activeName3" @tab-click="handleClick">
                                <el-tab-pane label="关注(0)" name="0">
                                    <img style="width:30%" src="" alt="">
                                </el-tab-pane>
                                <el-tab-pane label="粉丝(0)" name="1">
                                    <img style="width:30%" src="" alt="">

                                </el-tab-pane>
                            </el-tabs>
                        </el-card>
                        <el-card style="height:200px;margin-bottom: 20px">

                        </el-card>
                    </el-col>

                </el-row>



            </div>
            <el-dialog title="修改个人信息" :visible.sync="dialogFormVisible">
                <el-form :model="form" style="text-align: left;">
                    <el-form-item label="昵称：" :label-width="formLabelWidth">
                        <el-input v-model="form.name" autocomplete="off" v-value='2'></el-input>
                    </el-form-item>
                    <el-form-item label="手机号：" :label-width="formLabelWidth">
                        <el-input v-model="form.phone" autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item label="性别：" :label-width="formLabelWidth">
                        <el-select v-model="form.sex" placeholder="请选择性别">
                            <el-option label="男" value="男"></el-option>
                            <el-option label="女" value="女"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="邮箱：" :label-width="formLabelWidth">
                        <el-input v-model="form.email" autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item label="头像：" :label-width="formLabelWidth">
                        <el-upload class="upload-demo" drag action="http://0.0.0.0:888/file/img" :on-success="change">
                            <i class="el-icon-upload"></i>
                            <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>
                            <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过500kb</div>
                        </el-upload>
                    </el-form-item>


                </el-form>
                <div slot="footer" class="dialog-footer">
                    <el-button @click="dialogFormVisible = false">取 消</el-button>
                    <el-button type="primary" @click="update">确 定</el-button>
                </div>
            </el-dialog>
            <footer>
                <div class="footer-top">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-6 col-lg-3 footer_widget">
                                <div class="inner">
                                    <h4>About</h4>
                                    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac
                                        turpis egestas.</p>
                                    <p>Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet,
                                        antesenectus et netus et malesuada fames ac turpis egestas.</p>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3 footer_widget">
                                <div class="inner">
                                    <h4>Company</h4>
                                    <ul>
                                        <li><a href="#">Company Overview</a></li>
                                        <li><a href="#">Meet The Team</a></li>
                                        <li><a href="#">Our Awesome Partners</a></li>
                                        <li><a href="#">Our Services</a></li>
                                        <li><a href="#">Frequently Asked Questions</a></li>
                                        <li><a href="#">Contact Us</a></li>
                                        <li><a href="#">Terms of Use</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="copyright-txt">
                                    Copyright &copy; 2019.Company name All rights reserved.<a target="_blank"
                                        href="http://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a>
                                </div>
                            </div>
                            <div class="col-lg-6 text-right">
                                <div class="footer-nav">
                                    <a href="#">Home</a>
                                    <a href="#">Portfolio</a>
                                    <a href="#">Pages</a>
                                    <a href="#">Shortcode</a>
                                    <a href="#">Blog</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>


        </div>
    </div>

    <!--Required JS files-->
    <script src="assets/js/jquery-2.2.4.min.js"></script>
    <script src="assets/js/vendor/popper.min.js"></script>
    <script src="assets/js/vendor/bootstrap.min.js"></script>
    <script src="assets/js/vendor/owl.carousel.min.js"></script>
    <script src="assets/js/vendor/isotope.pkgd.min.js"></script>
    <script src="assets/js/vendor/jquery.barfiller.js"></script>
    <script src="assets/js/vendor/loopcounter.js"></script>
    <script src="assets/js/vendor/slicknav.min.js"></script>
    <script src="assets/js/active.js"></script>
    <script>
        var app = new Vue({
            el: '#app',
            data: {
                link: '<a href="#" rel="external nofollow" >这是一个连接</a>',
                seen: true,
                list: [],
                dialogFormVisible: false,
                activeIndex: '1',
                userInfo: {},
                activeIndex2: '1',
                formLabelWidth: '100px',
                activeName3: '0',
                imgs: ['https://s2.ax1x.com/2019/05/06/EBRZqK.jpg', 'https://img.pconline.com.cn/images/upload/upc/tx/itbbs/1904/24/c19/144112747_1556100405099.jpg', 'https://img.pconline.com.cn/images/upload/upc/tx/itbbs/1904/01/c11/140114944_1554093874677.jpg'],
                form: {
                    name: '',
                    phone: '',
                    sex: '',
                    email: '',
                }

            },
            methods: {
                change(res) {
                    this.$data.userInfo.headImg=res.content
                    console.log(res)
                },
                update() {
                    axios({
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        url: 'http://0.0.0.0:888/member/new',
                        data: form
                    }).then((re) => {
                        if (re.data.code === 0) {
                            this.$message({
                                message: '修改成功',
                                type: 'success'
                            });
                            this.$data.userInfo = re.data.content
                            sessionStorage.setItem('userInfo', re.data.content)
                        }
                        else {
                            this.$message.error(re.data.content)
                        }

                    })
                },
                toDetail() {
                    location.href = ('detail.html')
                },
                handleClick(e) {
                    this.$data.activeName3 = e.name
                },
                logout() {
                    axios({
                        method: 'get',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        url: 'http://0.0.0.0:888/member/out',
                    }).then((re) => {
                        console.log('re', re)
                        if (re.data.code === 0) {
                            this.$message({
                                message: '注销成功',
                                type: 'success'
                            });
                            setTimeout('location.href=("login.html")', 500)


                        }
                    })
                }

            },
            created: function () {
                let userInfo = JSON.parse(sessionStorage.getItem('userInfo'))
                if (userInfo != null) {
                    this.$data.userInfo = userInfo
                    this.$data.form = userInfo
                }
                console.log('user', userInfo)
                let _this = this
                axios({
                    method: 'get',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    url: 'http://0.0.0.0:888/module/list',
                }).then((re) => {
                    console.log(re)
                    if (re.data.code === 0) {
                        this.$data.list = re.data.content
                    }
                })
            }
        })


    </script>
</body>

</html>