<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title></title>
    <!-- <script src="https://cdn.bootcss.com/vue/2.5.16/vue.min.js"></script> -->
    <script src="assets/js/vue.js"></script>
    <script src="assets/js/axios.js"></script>
    <!-- 引入样式 -->
    <!-- <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"> -->
    <link rel="stylesheet" href="assets/css/element.css">

    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <!-- 引入组件库 -->
    <script src="assets/js/element.js"></script>
    <!-- Required CSS files -->
    <link href="assets/css/fonts.css" rel="stylesheet">


    <link rel="stylesheet" href="assets/css/owl.carousel.css">
    <link rel="stylesheet" href="assets/css/barfiller.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/slicknav.css">
    <link rel="stylesheet" href="assets/css/main.css">
</head>

<body>
    <div id="app">
        <div class="preloader">
            <span class="preloader-spin"></span>
        </div>
        <div class="site">
            <header>
                <div class="container">
                    <div class="row">
                        <div class="col-6 col-sm-3 logo-column">
                            <a href="index.html" class="logo">
                                <img src="assets/img/logo.png" alt="logo">
                            </a>
                        </div>
                        <div class="col-6 col-sm-9 nav-column clearfix">
                            <div class="right-nav">
                                <span class="search-icon fa fa-search"></span>
                                <form action="#" class="search-form">
                                    <input type="search" placeholder="search now">
                                    <button type="submit"><i class="fa fa-search"></i></button>
                                </form>
                            </div>
                            <nav id="menu" class="d-none d-lg-block">
                                <ul>
                                    <li class="current-menu-item has-child">
                                        <a href="index.html">产品库</a>
                                        <ul class="sub-menu" style="z-index: 1000">
                                            <li><a href="#">硬件</a></li>
                                            <li><a href="#">软件</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="about.html">关于</a></li>

                                    <li class="has-child">
                                        <a href="#">建议</a>
                                        <ul class="sub-menu" style="z-index: 1000">
                                            <li><a href="#">留言</a></li>
                                            <li><a href="#">反馈建议</a></li>
                                            <li><a href="#">联系我们</a></li>
                                        </ul>
                                    </li>
                                    <li v-if="userInfo.name" class="has-child">
                                        <a href="mine.html"><img :src="userInfo.headImg" style="width:30px;height:30px;border-radius:50%" alt="">
                                        {{userInfo.name}}</a>
                                        <ul class="sub-menu" style="z-index: 1000">
                                            <li><a @click="logout">注销</a></li>
                                            <li><a @click="dialogFormVisible = true">修改密码</a></li>
                                        </ul>
                                    </li>
                                    <li v-else><a href="login.html">登录</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </header>
            <div class="container text-center">
                    <el-breadcrumb separator-class="el-icon-arrow-right" style="margin:30px;">
                            <el-breadcrumb-item><a href="index.html">首页</a></el-breadcrumb-item>
                            <el-breadcrumb-item><a href="#"></a>板块</el-breadcrumb-item>
                            <el-breadcrumb-item><a href="#"></a>正文</el-breadcrumb-item>
                        </el-breadcrumb>
                <el-row :gutter="20">
                    <el-col :span="16">
                        <el-card style="">
                            <el-row :gutter="20">
                                <div class="grid-content bg-purple" style="float:left;text-align:right;">
                                    <img style="width:100px;border-radius:50%;text-align:right;" :src="content.head_img"
                                        alt="">
                                    <br>
                                </div>
                                <el-col :span="20" style="text-align:left" class="box-card-span">
                                    <p>{{content.title}}</p>
                                    <p style="color:#363636">{{content.name}} <el-tag color="#96cbfc" size="mini"
                                            style="color:#fff">{{content.lv}}</el-tag>
                                        <el-tag size="mini">{{content.lvName}}</el-tag>

                                        <span style="float:right">
                                            <el-tag>楼主</el-tag>
                                        </span>
                                    </p>
                                    <p style="color:#989898">2019-05-07 21:17{{content.createTime}}</p>

                                </el-col>

                            </el-row>


                        </el-card>
                        <el-divider></el-divider>
                        <el-card style="text-align:left">
                            <!-- 内容区域
                                 -->
                            <div v-html="content.content">
                            </div>
                            <div style="margin:30px;text-align: center">
                                <el-button type="primary" size="medium" icon="el-icon-s-flag">评分</el-button>
                                <el-button type="primary" size="medium" icon="el-icon-share">分享</el-button>

                            </div>
                            <div style="float:right;margin:10px">
                                <a style="color:#e58434" href="#" type="warning">回复</a>
                                <a style="color:#e58434" href="#" type="warning">评分</a>
                                <a style="color:#e58434" href="#" type="warning">举报</a>
                            </div>
                        </el-card>
                        <br>

                        <!-- 评论区 -->
                        <el-card v-for="(o,index) in commentList" style="margin-bottom:1px">
                            <el-row>
                                <img style="width:80px;height:80px;float:left" :src="o.head_img" alt="">
                                <el-col :span="20" style="text-align:left;padding-left:10px">
                                    <p>
                                        {{o.name}} <el-tag size="mini">{{o.lv}}</el-tag> <span
                                            style="color:#989898">{{o.publish_time}}</span>
                                        <el-tag style="float:right" size="mini">{{index+1}}楼</el-tag>
                                    </p>
                                    <p>
                                        {{o.content}}
                                        <div style="float:right;margin:10px">
                                            <a style="color:#989898" href="#" type="warning">回复</a>
                                            <a style="color:#989898" href="#" type="warning">评分</a>
                                            <a style="color:#989898" href="#" type="warning">举报</a>
                                        </div>
                                        <br>
                                        <div v-if="o.signature" style="color:#989898">
                                            <el-divider content-position="left"><i class="el-icon-edit"></i>签名档
                                            </el-divider>
                                            <p style="margin:10px">{{o.signature}}</p>
                                        </div>
                                    </p>
                                </el-col>
                            </el-row>
                        </el-card>
                        <!-- 评论区 -->
                        <br>
                        <div class="editor">
                            <div ref="toolbar" style="width:100%;margin:0px auto" class="toolbar">
                            </div>
                            <div ref="editor" style="text-align:left;:690px;margin:0px auto;border:1px solid #bbb;height:280px"
                                class="text">
                            </div>
                        </div>

                        <div style="float:right;margin:40px 0 40px 0;">
                            <el-button type="success" @click="publish(content.id)"
                                style="float:right;background: #e2761c">发表
                            </el-button>
                        </div>
                    </el-col>
                    <el-col :span="8">
                        <el-card style="height:110px;text-align:left">
                            <el-dropdown split-button type="primary">
                                <a style="color:#fff" href="publish.html">发表新帖</a>
                                <el-dropdown-menu slot="dropdown">
                                    <el-dropdown-item><a href="publish.html">发起主题</a></el-dropdown-item>
                                    <el-dropdown-item><a href="publish.html">发起活动</a></el-dropdown-item>
                                </el-dropdown-menu>
                            </el-dropdown>
                            <el-button type="primary" style="float:right;margin-left:10px" icon="el-icon-star-off"
                                circle></el-button>
                            <el-button type="primary" style="float:right" icon="el-icon-edit" circle></el-button>
                        </el-card>
                        <el-card style="height:220px;margin-top:20px;text-align: left">
                            <p>
                                <span style="color:#e58434;font-size:16px">Ta的帖子 </span>
                                <a href="#" style="float:right">更多>></a>
                                <el-divider></el-divider>
                                <ul style="list-style:none;">
                                    <li class="text-control" v-for="o in list">
                                        <a href="#"> {{o.name}}
                                        </a>
                                    </li>
                                </ul>
                            </p>
                        </el-card>
                        <el-card style="height:330px;margin-top:20px;text-align: left">
                            <span style="color:#e58434;font-size:16px">推荐阅读 </span>
                            <el-carousel indicator-position="none" height="150px">
                                <el-carousel-item v-for="item in introImgs" :key="item">
                                    <img :src="item.url" alt="" style="width:100%;float:left;height:150px">
                                    <div class="card-text-attach">{{item.name}}</div>
                                </el-carousel-item>
                            </el-carousel>
                            <ul style="list-style:none;" style="margin:20px">
                                <li class="text-control" v-for="o in introList">
                                    <a href="#"> {{o.name}}
                                    </a>
                                </li>
                            </ul>
                        </el-card>
                    </el-col>
                </el-row>
            </div>
            <footer>
                <div class="footer-top">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-6 col-lg-3 footer_widget">
                                <div class="inner">
                                    <h4>About</h4>
                                    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac
                                        turpis egestas.</p>
                                    <p>Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet,
                                        antesenectus et netus et malesuada fames ac turpis egestas.</p>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-3 footer_widget">
                                <div class="inner">
                                    <h4>Company</h4>
                                    <ul>
                                        <li><a href="#">Company Overview</a></li>
                                        <li><a href="#">Meet The Team</a></li>
                                        <li><a href="#">Our Awesome Partners</a></li>
                                        <li><a href="#">Our Services</a></li>
                                        <li><a href="#">Frequently Asked Questions</a></li>
                                        <li><a href="#">Contact Us</a></li>
                                        <li><a href="#">Terms of Use</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="copyright-txt">
                                    Copyright &copy; 2019.Company name All rights reserved.<a target="_blank"
                                        href="http://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a>
                                </div>
                            </div>
                            <div class="col-lg-6 text-right">
                                <div class="footer-nav">
                                    <a href="#">Home</a>
                                    <a href="#">Portfolio</a>
                                    <a href="#">Pages</a>
                                    <a href="#">Shortcode</a>
                                    <a href="#">Blog</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
            <el-dialog title="修改密码" :visible.sync="dialogFormVisible">
                <el-form :model="form" style="text-align: left;">
                    <el-form-item label="新密码" :label-width="formLabelWidth">
                        <el-input v-model="form.password" autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item label="再次输入新密码" :label-width="formLabelWidth">
                        <el-input autocomplete="off"></el-input>
                    </el-form-item>
                </el-form>
                <div slot="footer" class="dialog-footer">
                    <el-button @click="dialogFormVisible = false">取 消</el-button>
                    <el-button type="primary" @click="dialogFormVisible = false">确 定</el-button>
                </div>
            </el-dialog>

        </div>
    </div>
    <!-- 自定义组件模板 -->
    <script src="assets/js/editor.js"></script>

    <script src="assets/js/jquery-2.2.4.min.js"></script>
    <script src="assets/js/vendor/popper.min.js"></script>
    <script src="assets/js/vendor/bootstrap.min.js"></script>
    <script src="assets/js/vendor/owl.carousel.min.js"></script>
    <script src="assets/js/vendor/isotope.pkgd.min.js"></script>
    <script src="assets/js/vendor/jquery.barfiller.js"></script>
    <script src="assets/js/vendor/loopcounter.js"></script>
    <script src="assets/js/vendor/slicknav.min.js"></script>
    <script src="assets/js/active.js"></script>
    <script>
        var E = window.wangEditor
        var app = new Vue({
            el: '#app',
            data: {
                seen: true,
                imgs: ['https://s2.ax1x.com/2019/05/06/EBRZqK.jpg', 'https://img.pconline.com.cn/images/upload/upc/tx/itbbs/1904/24/c19/144112747_1556100405099.jpg', 'https://img.pconline.com.cn/images/upload/upc/tx/itbbs/1904/01/c11/140114944_1554093874677.jpg'],
                userInfo: {},
                formLabelWidth: '140px',
                dialogFormVisible: false,
                seen: true,
                editor: null,
                commentList: [
                    {
                        username: "李四",
                        lv: "LV2",
                        time: "2019-05-08 00:58",
                        content: "那时最疯狂最快通关的好像在7个小时以内吧，前提是必须省略过场片段以及次要情节",
                        signature: "办公兼修图兼剪辑：ThreadRipper 2950X +太极X399 +超白金Vega 64 +DDR4 3200 32G +M9PeG 512G X2 +Win10 Pro 64位 游戏及影视及网购：i7 3930K@4.2G +X79-UP4 +冰龙1070 +DDR3 2133 16G +MP961 256G PCIE转M.2 +Win10 Pro 64位"
                    }, {
                        username: "张三",
                        lv: "LV5",
                        time: "2019-05-02 14:53",
                        content: "支线任务太费时了，以前玩古墓丽影系列都是顺着路线玩，不会刻意完成每个任务，太累人了。我是玩游戏，不是游戏玩我啊"
                    },
                ],
                list: [
                    {
                        name: "刚下载了个老游戏，问下谁通关过？要多长时间啊"
                    },
                    {
                        name: "感觉WINDOWS10自带的任务管理器显示频率不对，你们也是这样的吗？"
                    },
                    {
                        name: "AMD比INTEL厚道多了，看1级2级3级缓存，特别是32MB的3级缓存"
                    },
                    {
                        name: "感觉ZIP比RAR压缩效率高些，有个问题请高人解答"
                    }
                ],
                introList: [
                    {
                        name: "入门游戏新机综合搭配"

                    }, {
                        name: "全侧透光污染主机，微星Z270平台装机"

                    }, {
                        name: "从奔腾4到G4560，一台老爷机的复活记"

                    }, {
                        name: "用NAS备份数据，可以无惧比特币勒索！"

                    }
                ],
                introImgs: [
                    {
                        name: "入门游戏新机综合搭配",
                        url: "https://s2.ax1x.com/2019/05/06/EBRZqK.jpg"

                    }, {
                        name: "全侧透光污染主机，微星Z270平台装机",
                        url: "https://img.pconline.com.cn/images/upload/upc/tx/itbbs/1904/24/c19/144112747_1556100405099.jpg"

                    }, {
                        name: "从奔腾4到G4560，一台老爷机的复活记",
                        url: "ttps://img.pconline.com.cn/images/upload/upc/tx/itbbs/1904/01/c11/140114944_1554093874677.jpg"

                    }, {
                        name: "用NAS备份数据，可以无惧比特币勒索！",
                        url: "https://s2.ax1x.com/2019/05/06/EBRZqK.jpg"

                    }
                ],
                content: {},
                imgs: ['https://s2.ax1x.com/2019/05/06/EBRZqK.jpg', 'https://img.pconline.com.cn/images/upload/upc/tx/itbbs/1904/24/c19/144112747_1556100405099.jpg', 'https://img.pconline.com.cn/images/upload/upc/tx/itbbs/1904/01/c11/140114944_1554093874677.jpg'],
                userInfo: {},
                formLabelWidth: '100px',
                form: {
                    password: ''
                },
                dialogFormVisible: false,

            },
            methods: {
                publish(id) {
                    this.content = this.editor.$textElem['0'].innerHTML
                    if (this.moduleId === '') {
                        this.$message.error('请选择模块')
                        return;
                    }
                    if (this.content === '') {
                        this.$message.error('请输入要发布的内容')
                        return;
                    }
               
                    axios({
                        method: 'POST',
                        data: {
                            content: this.content,
                            invitationId: id,
                            memberId: JSON.parse(sessionStorage.getItem('userInfo')).id
                        },
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        url: 'http://0.0.0.0:888/reply/add',
                    }).then((re) => {
                        console.log('re', re)
                        if (re.data.code === 0) {
                            this.$message({
                                message: '发布成功',
                                type: 'success'
                            });
                            setTimeout('location.href=("mine.html")', 1500)

                        }
                    })
                },
                he() {
                    console.log('ss')
                },
                toDetail() {
                    location.href = ('detail.html')
                },
                logout() {
                    axios({
                        method: 'get',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        url: 'http://0.0.0.0:888/module/list',
                    }).then((re) => {
                        console.log(re)
                        if (re.data.code === 0) {
                            this.$data.list = re.data.content
                        }
                    })
                },
                GetRequest() {
                    var url = location.search; //获取url中"?"符后的字串  
                    var theRequest = new Object();
                    if (url.indexOf("?") != -1) {
                        var str = url.substr(1);
                        strs = str.split("&");
                        for (var i = 0; i < strs.length; i++) {
                            theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                        }
                    }
                    return theRequest;
                }
            },
            mounted() {
                this.editor = new E(this.$refs.toolbar, this.$refs.editor)
                this.editor.customConfig.uploadImgShowBase64 = true // base 64 存储图片
                this.editor.customConfig.menus = [
                    'head', // 标题
                    'bold', // 粗体
                    'fontSize', // 字号
                    'fontName', // 字体
                    'italic', // 斜体
                    'underline', // 下划线
                    'strikeThrough', // 删除线
                    'foreColor', // 文字颜色
                    'backColor', // 背景颜色
                    'link', // 插入链接
                    'list', // 列表
                    'justify', // 对齐方式
                    'quote', // 引用
                    'emoticon', // 表情
                    'image', // 插入图片
                    'table', // 表格
                    'video', // 插入视频
                    'code', // 插入代码
                    'undo', // 撤销
                    'redo', // 重复
                    'fullscreen' // 全屏
                ]
                this.editor.create()
            },
            created: function () {
                let _this = this
                let param = _this.GetRequest()
                let userInfo = JSON.parse(sessionStorage.getItem('userInfo'))
                console.log('user', userInfo)
                if (userInfo != null) {
                    _this.$data.userInfo = userInfo
                }
                axios({
                    method: 'get',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    url: `http://0.0.0.0:888/invitation/${param.id ? param.id : 20}`,
                }).then((res) => {
                    console.log('res', res)
                    if (res.data.code === 0) {
                        _this.$data.content = res.data.content
                    }
                })
                axios({
                    method: 'get',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    url: `http://localhost:888/reply/list1?invitationId=${param.id ? param.id : 20}`,
                }).then((res) => {
                    console.log('resss', res)
                    if (res.data.code === 0) {
                        _this.$data.commentList = res.data.content.records
                    }
                })

            }
        })
    </script>
</body>

</html>